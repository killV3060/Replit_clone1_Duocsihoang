<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dược Sĩ Hoàng - AI Chat Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'medical-blue': '#2563EB',
                        'healthcare-green': '#059669',
                        'trust-blue': '#0284C7',
                        'chat-bg': '#F8FAFC'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-chat-bg font-inter antialiased">
    <!-- @COMPONENT: App Container -->
    <div class="min-h-screen flex flex-col">
        
        <!-- @COMPONENT: Header -->
        <header class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-10">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-medical-blue rounded-full flex items-center justify-center">
                            <i class="fas fa-user-md text-white text-lg"></i>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold text-slate-900">Dược Sĩ Hoàng</h1>
                            <p class="text-sm text-slate-600">Trợ lý AI chuyên nghiệp</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <div class="hidden sm:flex items-center space-x-2">
                            <div class="w-2 h-2 bg-healthcare-green rounded-full animate-pulse"></div>
                            <span class="text-sm text-slate-600" data-bind="connectionStatus">Trực tuyến</span>
                        </div>
                        
                        <button class="p-2 text-slate-400 hover:text-slate-600 transition-colors rounded-lg hover:bg-slate-100" 
                                data-event="click:handleSettings">
                            <i class="fas fa-cog text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>
        <!-- @END_COMPONENT: Header -->

        <!-- @COMPONENT: Chat Container -->
        <main class="flex-1 flex flex-col max-w-4xl mx-auto w-full">
            
            <!-- @COMPONENT: Chat Messages Area -->
            <div class="flex-1 overflow-y-auto px-4 sm:px-6 lg:px-8 py-6" id="chatContainer" data-implementation="Auto-scroll to bottom on new messages">
                
                <!-- Welcome Message -->
                <div class="mb-8 text-center">
                    <div class="w-16 h-16 bg-gradient-to-br from-medical-blue to-trust-blue rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-pills text-white text-2xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-slate-900 mb-2">Chào mừng đến với Dược Sĩ Hoàng</h2>
                    <p class="text-slate-600 max-w-md mx-auto">Tôi là trợ lý AI chuyên nghiệp về dược phẩm và sức khỏe. Hãy đặt câu hỏi để tôi có thể hỗ trợ bạn.</p>
                </div>

                <!-- @MAP: messages.map(message => ( -->
                <!-- AI Message Example -->
                <div class="mb-6" data-mock="true">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-medical-blue rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <div class="bg-white rounded-2xl rounded-tl-md px-4 py-3 shadow-sm border border-slate-200 max-w-3xl">
                                <p class="text-slate-800 leading-relaxed" data-bind="message.content">
                                    Chào bạn! Tôi là Dược Sĩ Hoàng, trợ lý AI chuyên về dược phẩm và sức khỏe. Tôi có thể giúp bạn:
                                </p>
                                <ul class="mt-3 space-y-1 text-slate-700">
                                    <li class="flex items-center space-x-2">
                                        <i class="fas fa-check text-healthcare-green text-xs"></i>
                                        <span>Tư vấn về thuốc và liều dùng</span>
                                    </li>
                                    <li class="flex items-center space-x-2">
                                        <i class="fas fa-check text-healthcare-green text-xs"></i>
                                        <span>Thông tin về tác dụng phụ</span>
                                    </li>
                                    <li class="flex items-center space-x-2">
                                        <i class="fas fa-check text-healthcare-green text-xs"></i>
                                        <span>Hướng dẫn bảo quản thuốc</span>
                                    </li>
                                    <li class="flex items-center space-x-2">
                                        <i class="fas fa-check text-healthcare-green text-xs"></i>
                                        <span>Lời khuyên sức khỏe tổng quát</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="flex items-center justify-between mt-2 px-1">
                                <span class="text-xs text-slate-500" data-bind="message.timestamp">9:30 AM</span>
                                <div class="flex items-center space-x-2">
                                    <button class="text-slate-400 hover:text-slate-600 transition-colors p-1" 
                                            data-event="click:copyMessage">
                                        <i class="fas fa-copy text-xs"></i>
                                    </button>
                                    <button class="text-slate-400 hover:text-healthcare-green transition-colors p-1" 
                                            data-event="click:likeMessage">
                                        <i class="fas fa-thumbs-up text-xs"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- User Message Example -->
                <div class="mb-6" data-mock="true">
                    <div class="flex items-start space-x-3 justify-end">
                        <div class="flex-1">
                            <div class="bg-medical-blue rounded-2xl rounded-tr-md px-4 py-3 shadow-sm max-w-3xl ml-auto">
                                <p class="text-white leading-relaxed" data-bind="message.content">
                                    Chào bác sĩ! Em muốn hỏi về thuốc paracetamol, liều dùng như thế nào cho người lớn ạ?
                                </p>
                            </div>
                            <div class="flex items-center justify-between mt-2 px-1">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-check text-healthcare-green text-xs"></i>
                                    <span class="text-xs text-slate-500">Đã gửi</span>
                                </div>
                                <span class="text-xs text-slate-500" data-bind="message.timestamp">9:32 AM</span>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-slate-300 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-user text-slate-600 text-sm"></i>
                        </div>
                    </div>
                </div>

                <!-- AI Response with Medical Info -->
                <div class="mb-6" data-mock="true">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-medical-blue rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <div class="bg-white rounded-2xl rounded-tl-md px-4 py-3 shadow-sm border border-slate-200 max-w-3xl">
                                <div class="bg-blue-50 border-l-4 border-medical-blue p-3 mb-3 rounded-r-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-info-circle text-medical-blue mr-2"></i>
                                        <span class="text-sm font-medium text-blue-800">Thông tin thuốc Paracetamol</span>
                                    </div>
                                </div>
                                
                                <div class="space-y-3">
                                    <div>
                                        <h4 class="font-semibold text-slate-800 mb-2">Liều dùng cho người lớn:</h4>
                                        <ul class="space-y-1 text-slate-700">
                                            <li>• <strong>Uống:</strong> 500-1000mg mỗi lần, cách 4-6 giờ</li>
                                            <li>• <strong>Tối đa:</strong> Không quá 4000mg trong 24 giờ</li>
                                            <li>• <strong>Thời gian:</strong> Uống sau ăn để giảm kích ứng dạ dày</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-3">
                                        <div class="flex items-start">
                                            <i class="fas fa-exclamation-triangle text-amber-600 mr-2 mt-0.5"></i>
                                            <div>
                                                <p class="text-sm font-medium text-amber-800">Lưu ý quan trọng:</p>
                                                <p class="text-sm text-amber-700 mt-1">Không dùng quá liều quy định. Tham khảo bác sĩ nếu có bệnh gan hoặc uống rượu thường xuyên.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mt-2 px-1">
                                <span class="text-xs text-slate-500" data-bind="message.timestamp">9:33 AM</span>
                                <div class="flex items-center space-x-2">
                                    <button class="text-slate-400 hover:text-slate-600 transition-colors p-1" 
                                            data-event="click:copyMessage">
                                        <i class="fas fa-copy text-xs"></i>
                                    </button>
                                    <button class="text-slate-400 hover:text-healthcare-green transition-colors p-1" 
                                            data-event="click:likeMessage">
                                        <i class="fas fa-thumbs-up text-xs"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Loading Message (Hidden by default) -->
                <div class="mb-6 hidden" id="loadingMessage" data-implementation="Show when AI is generating response">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-medical-blue rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <div class="bg-white rounded-2xl rounded-tl-md px-4 py-3 shadow-sm border border-slate-200 max-w-xs">
                                <div class="flex items-center space-x-2">
                                    <div class="flex space-x-1">
                                        <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce"></div>
                                        <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                                        <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                                    </div>
                                    <span class="text-sm text-slate-500">Đang soạn câu trả lời...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- @END_MAP )) -->

            </div>
            <!-- @END_COMPONENT: Chat Messages Area -->

            <!-- @COMPONENT: Chat Input Area -->
            <div class="border-t border-slate-200 bg-white p-4 sm:p-6">
                <div class="max-w-4xl mx-auto">
                    
                    <!-- Quick Actions (Optional) -->
                    <div class="mb-4 hidden sm:flex flex-wrap gap-2" id="quickActions">
                        <button class="px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-full transition-colors"
                                data-event="click:insertQuickMessage" data-message="Tư vấn về thuốc">
                            <i class="fas fa-pills mr-1"></i>
                            Tư vấn thuốc
                        </button>
                        <button class="px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-full transition-colors"
                                data-event="click:insertQuickMessage" data-message="Tác dụng phụ">
                            <i class="fas fa-exclamation-triangle mr-1"></i>
                            Tác dụng phụ
                        </button>
                        <button class="px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-full transition-colors"
                                data-event="click:insertQuickMessage" data-message="Liều dùng">
                            <i class="fas fa-prescription-bottle mr-1"></i>
                            Liều dùng
                        </button>
                    </div>

                    <!-- Main Input Area -->
                    <form class="relative" data-event="submit:handleSendMessage" data-implementation="Prevent default, validate input, send to API">
                        <div class="flex items-end space-x-3">
                            <div class="flex-1 relative">
                                <textarea 
                                    id="messageInput"
                                    rows="1" 
                                    placeholder="Nhập câu hỏi của bạn về thuốc và sức khỏe..."
                                    class="w-full resize-none rounded-2xl border border-slate-300 px-4 py-3 pr-12 focus:border-medical-blue focus:ring-2 focus:ring-medical-blue/20 focus:outline-none text-slate-800 placeholder-slate-500 max-h-32 overflow-y-auto"
                                    data-implementation="Auto-resize based on content, max 4 rows"
                                    data-bind="messageInput"
                                ></textarea>
                                
                                <!-- Character limit indicator -->
                                <div class="absolute bottom-2 right-12 text-xs text-slate-400" id="charCount" data-bind="messageLength">
                                    0/500
                                </div>
                            </div>
                            
                            <button 
                                type="submit"
                                id="sendButton"
                                class="bg-medical-blue hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white rounded-2xl px-6 py-3 transition-all duration-200 flex items-center space-x-2 font-medium shadow-sm hover:shadow-md"
                                data-implementation="Disable when input is empty or API is loading"
                            >
                                <i class="fas fa-paper-plane"></i>
                                <span class="hidden sm:inline">Gửi</span>
                            </button>
                        </div>
                        
                        <!-- Input validation message -->
                        <div class="mt-2 text-sm text-red-600 hidden" id="inputError" data-implementation="Show validation errors">
                            Vui lòng nhập câu hỏi trước khi gửi.
                        </div>
                    </form>

                    <!-- Disclaimer -->
                    <div class="mt-4 text-center">
                        <p class="text-xs text-slate-500 max-w-2xl mx-auto">
                            <i class="fas fa-info-circle mr-1"></i>
                            Thông tin được cung cấp chỉ mang tính chất tham khảo. Luôn tham khảo ý kiến bác sĩ hoặc dược sĩ có chuyên môn trước khi sử dụng thuốc.
                        </p>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: Chat Input Area -->

        </main>
        <!-- @END_COMPONENT: Chat Container -->

        <!-- @COMPONENT: Error Toast (Hidden by default) -->
        <div id="errorToast" class="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 z-50" 
             data-implementation="Show on API errors, auto-hide after 5 seconds">
            <div class="flex items-center space-x-2">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorMessage">Có lỗi xảy ra. Vui lòng thử lại.</span>
                <button class="ml-4 hover:text-red-200" data-event="click:hideError">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <!-- @END_COMPONENT: Error Toast -->

    </div>
    <!-- @END_COMPONENT: App Container -->

    <script>
        // TODO: Implement React components and state management
        // TODO: Integrate with Gemini API
        // TODO: Add real-time messaging functionality
        // TODO: Implement proper error handling and loading states
        
        (function() {
            'use strict';
            
            // Auto-resize textarea
            const messageInput = document.getElementById('messageInput');
            const charCount = document.getElementById('charCount');
            const sendButton = document.getElementById('sendButton');
            
            if (messageInput) {
                messageInput.addEventListener('input', function() {
                    // Auto-resize
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 128) + 'px';
                    
                    // Update character count
                    const length = this.value.length;
                    if (charCount) {
                        charCount.textContent = `${length}/500`;
                        charCount.classList.toggle('text-red-500', length > 450);
                    }
                    
                    // Toggle send button state
                    if (sendButton) {
                        sendButton.disabled = length === 0 || length > 500;
                    }
                });

                // Handle Enter key (without Shift)
                messageInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        // TODO: Trigger form submission
                        console.log('Form submission triggered');
                    }
                });
            }

            // Smooth scroll to bottom when new messages arrive
            function scrollToBottom() {
                const chatContainer = document.getElementById('chatContainer');
                if (chatContainer) {
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            }

            // Example loading state toggle
            function showLoading() {
                const loadingMessage = document.getElementById('loadingMessage');
                if (loadingMessage) {
                    loadingMessage.classList.remove('hidden');
                    scrollToBottom();
                }
            }

            function hideLoading() {
                const loadingMessage = document.getElementById('loadingMessage');
                if (loadingMessage) {
                    loadingMessage.classList.add('hidden');
                }
            }

            // Error handling
            function showError(message) {
                const errorToast = document.getElementById('errorToast');
                const errorMessage = document.getElementById('errorMessage');
                
                if (errorToast && errorMessage) {
                    errorMessage.textContent = message;
                    errorToast.classList.remove('translate-x-full');
                    
                    // Auto-hide after 5 seconds
                    setTimeout(() => {
                        errorToast.classList.add('translate-x-full');
                    }, 5000);
                }
            }

            // Initialize on page load
            document.addEventListener('DOMContentLoaded', function() {
                scrollToBottom();
                
                // Focus on input
                if (messageInput) {
                    messageInput.focus();
                }
            });

        })();
    </script>
</body>
</html>